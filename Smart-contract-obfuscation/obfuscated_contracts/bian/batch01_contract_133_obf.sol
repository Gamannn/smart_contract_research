pragma solidity ^0.4.7;contract MobaBase { constructor () public { s2c.Ox628cf6cc1a1ecbecc3a0890cf15c73b2483fbad5 = msg.sender; } event transferToOwnerEvent(uint256 price); modifier Ox5ae2b4421a231e7dac5265197a8e67aa6c2013c1 { require(msg.sender == s2c.Ox628cf6cc1a1ecbecc3a0890cf15c73b2483fbad5,"only Ox628cf6cc1a1ecbecc3a0890cf15c73b2483fbad5 can call this function"); _; } modifier notLock { require(s2c.isLock == false,"contract current is lock status"); _; } modifier msgSendFilter() { address addr = msg.sender; uint size; assembly { size := extcodesize(addr) } require(size <= 0,"address must is not contract"); require(msg.sender == tx.origin, "msg.sender must equipt tx.origin"); _; } function Ox7b3c35cb807dc66b9cfc2d49e8618afe35256bc8(address Ox3642542503ab14c6d8d0675378c3a83a45d141a7) Ox5ae2b4421a231e7dac5265197a8e67aa6c2013c1 public { if (Ox3642542503ab14c6d8d0675378c3a83a45d141a7 != address(0)) { s2c.Ox628cf6cc1a1ecbecc3a0890cf15c73b2483fbad5 = Ox3642542503ab14c6d8d0675378c3a83a45d141a7; } } function transferToOwner() Ox5ae2b4421a231e7dac5265197a8e67aa6c2013c1 msgSendFilter public { uint256 totalBalace = address(this).balance; s2c.Ox628cf6cc1a1ecbecc3a0890cf15c73b2483fbad5.transfer(totalBalace); emit transferToOwnerEvent(totalBalace); } function updateLock(bool Ox0897e88e95af2bb778138a54726e9eaf026cf71c) Ox5ae2b4421a231e7dac5265197a8e67aa6c2013c1 public { require(s2c.isLock != Ox0897e88e95af2bb778138a54726e9eaf026cf71c," updateLock new status == old status"); s2c.isLock = Ox0897e88e95af2bb778138a54726e9eaf026cf71c; } }contract IBRInviteData { function GetAddressByName(bytes32 name) public view returns (address);}contract IBRPerSellData { function GetPerSellInfo(uint16 id) public view returns (uint16,uint256 price,bool isOver);}contract BRPerSellControl is MobaBase { IBRInviteData public mInviteAddr; IBRPerSellData public mPerSellData; mapping (address => uint16[]) public mBuyList; event updateIntefaceEvent(); event transferToOwnerEvent(uint256 price); event buyPerSellEvent(uint16 perSellId,bytes32 name,uint256 price); constructor(address inviteData, address perSellData) public { mInviteAddr = IBRInviteData(inviteData); mPerSellData = IBRPerSellData(perSellData); } function updateInteface(address inviteData, address perSellData) Ox5ae2b4421a231e7dac5265197a8e67aa6c2013c1 msgSendFilter public { mInviteAddr = IBRInviteData(inviteData); mPerSellData = IBRPerSellData(perSellData); emit updateIntefaceEvent(); } function GetPerSellInfo(uint16 id) public view returns (uint16 pesellId,uint256 price,bool isOver) { return mPerSellData.GetPerSellInfo(id); } function buyPerSell(uint16 perSellId,bytes32 name) notLock msgSendFilter payable public { uint16 id; uint256 price; bool isOver; (id,price,isOver) = mPerSellData.GetPerSellInfo(perSellId); require(id == perSellId && id > 0,"perSell.Id is error" ); require(msg.value == price,"msg.value is error"); require(isOver == false,"persell is over status"); address inviteAddr = mInviteAddr.GetAddressByName(name); if(inviteAddr != address(0)) { uint giveToEth = msg.value * 10 / 100; inviteAddr.transfer(giveToEth); } mBuyList[msg.sender].push(id); emit buyPerSellEvent(perSellId,name,price); } function getBuyInfo(address addr) public view returns (uint16[]){ return mBuyList[addr]; } struct scalar2Vector {bool isLock;address Ox628cf6cc1a1ecbecc3a0890cf15c73b2483fbad5;}scalar2Vector s2c = scalar2Vector( false, 0x0);}